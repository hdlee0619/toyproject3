<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

      <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
         crossorigin="anonymous"
      />
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script
         src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
         integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
         crossorigin="anonymous"
      ></script>
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />

      <title>TIL ÏàúÏúÑ</title>

      <link
         href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap"
         rel="stylesheet"
      />

      <style>
          @import url('https://fonts.googleapis.com/css2?family=Gothic+A1:wght@300;400&family=Jua&family=Noto+Sans+KR:wght@100&family=Poppins:wght@300;400;500;600;700;800&display=swap');
     body {
          font-family: 'Poppins', sans-serif;
            width: 100%;
            height: 2000px
        }
        header{
        width: 100%;
        height: 340px;

        background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://velog.velcdn.com/images/bepyan/post/dbc4167e-fd31-4331-96e6-368e62a62179/shocked-face-surprised.gif');
        background-position: center;
        background-size: cover;

        color: white;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        }
        .navbar{
            position: relative;
            top: 10px;
        }

        .mainbar{
            width: 100%;
            height: 40px;
            color: white;
            background-color: #0B2161;
             display: flex;
            justify-content: center;
            flex-direction: row;

            align-content: center;
        }

        .mainbar div{
            display: flex;

            text-align: center;

        }
        .mainbar div a{
            padding: 0 16px;
            color: #fff;
            text-decoration: none;
           font-size: 1.2rem;
            cursor: pointer;
            font-family: bold;
            margin-top: 5px;
        }
        .mainbar div:hover{
            transform: scale(1.15);
            transition: all 0.2s ease;
        }




        .cards{
            margin-top: 25px;
            width: 100%;
            margin: 0 auto;
            display: flex;
        }
        .cardlist{
            margin-left: 150px;
            margin-top: 50px;
        }




        .side_menu{
            position: fixed;
            top: 150px;
            left: 50px;

            border-radius: 30px;
            display: flex;
            flex-direction:column ;
            width: 4rem;
            align-content: center;
            padding: 0.5rem;
            text-align: center;
            z-index: 5;
            background: #333;
            opacity: 0;
            transition: 0.3s ease-in-out;
        }
        .side_menu div{
            pointer-events: revert;
            width: 100%;
            padding: 10px 10px;
            border-radius: 25px;
            margin-bottom: 10px;
            background: #868e96;
        }
         .side_menu div i{
             font-size: 1.3rem;
             color: white;
         }
         .side_menu div i:hover{
             transform: scale(1.4);
             transition: all 0.2s ease;
         }


        .WIL {
            margin: 0 auto;
            width: 40%;
            margin-top: 20px;
            text-align: center;
            height: 500px;
            margin: 10px;
            background: #f1f3f5;
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            transition: all 0.3s cubic-bezier(.25, .8, .25, 1);
        }







        .WIL:hover {
            box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
        }

        .img-size {
            margin-top: 5px;
            width: 300px;
            height: 150px;

        }

        .WIL-title {

            width: 100%;
            height: 100px;
        }

        .WIL-text {

            width: 100%;
            height: 200px;
        }

        .WlL-list {
            display: flex;
            justify-content: space-around
        }

        .WlL-list button {
            position: relative;
            top: -8px;
        }

        .WIL-name {
            font-size: 1.1rem;
        }

        .title_remove_list {
            display: flex;

        }

        .title_remove_list h4 {
            width: 80%;
            margin: 0 auto;
        }

        .title_remove_list button {
            padding: 0 5px;

        }



      </style>
      <script>
         $(document).ready(function () {
            listing();
         });

         function listing() {
            $.ajax({
               type: "GET",
               url: "/show",
               data: {},
               success: function (response) {
                  let rows = response["tils"];
                  console.log(rows)
                  for (let i = 0; i < rows.length; i++) {
                     let name = rows[i]["name"];
                     let address = rows[i]["vlog_url"];
                     let num = rows[i]["num"];
                     let like = rows[i]["like"];
                     let comment5 = rows[i]["comment5"];
                      let title = rows[i]['title']
                      let vlog_url = rows[i]['vlog_url']
                      let img = rows[i]['img']
                      let desc = rows[i]['desc']

                    //Í∏ÄÏûêÏàò 350Ïûê Ï¥àÍ≥º Ïãú
                      if (desc.length > 350) {
                           let temp_html = `
                           <div class="Newblog WIL">
                            <a href=${vlog_url} target="_blank">
                          <img src="${img}"
                            alt="" class="img-size">
                            </a>
                        <div class="title_remove_list">
                          <h4 class="WIL-title">${title}</h4>
                            <button class="btn">
                                <i class="fa-solid fa-xmark"></i>
                            </button>
                         </div>

                         <p class="WIL-text">
                        üö®Í∏ÄÏûêÏàò Ï†úÌïú üö®</br>
                        Ïù¥ÎØ∏ÏßÄ ÌÅ¥Î¶≠ÌïòÎ©¥ Í∏ÄÏùÑ Î≥¥Ïã§Ïàò ÏûàÏäµÎãàÎã§</p>
                        <div class="WlL-list">
                            <p class="WIL-name">${name}</p>
                           <button class="btn " onclick="like(${num})">üëç</button>
                            <span>${like}</span>
                    </div>
                </div>`
                            $("#blogs").append(temp_html);
                      }

                else{

                        // DBÏóêÏÑú Í∞í Í∞ÄÏ†∏Ïò§Í∏∞
                     let temp_html = `
                           <div class="Newblog WIL">
                            <a href=${vlog_url} target="_blank">
                          <img src="${img}"
                            alt="" class="img-size">
                            </a>
                        <div class="title_remove_list">
                          <h4 class="WIL-title">${title}</h4>
                            <button class="btn">
                                <i class="fa-solid fa-xmark"></i>
                            </button>
                         </div>

                         <p class="WIL-text">${desc} </p>
                        <div class="WlL-list">
                            <p class="WIL-name">${name}</p>
                           <button class="btn " onclick="like(${num})">üëç</button>
                            <span>${like}</span>
                    </div>
                </div>`
                     $("#blogs").append(temp_html);
                     }
                  }
               },
            });
         }

         function like(num) {
            $.ajax({
               type: "POST",
               url: "/like",
               data: { num_give: num },
               success: function (response) {
                  alert(response["msg"]);
                  window.location.reload();
               },
            });
         }


        // scrollY 350 ÏÇ¨Ïù¥ÎìúÎ©îÎâ¥Î∞î Î≥¥Ïù¥Í≤åÌïòÍ∏∞
          $(window).on('scroll', function(){
        if (window.scrollY > 350) {
       $('.side_menu').css('opacity', '1');
           }else if(window.scrollY < 350) {
        $('.side_menu').css('opacity', '0');
        }
        });


      </script>
   </head>

   <body>

      <header>
          <div class="navbar">
              <h2>üßëüèª‚ÄçüíªÌï≠Ìï¥99 12Í∏∞ TIL Îì±Î°ùÌïòÍ∏∞!</h2>
          </div>

      </header>
      <div class="mainbar">
          <div> <a href="#" onclick="location.href='/'">Ìôà</a> </div>
          <div> <a href="#" onclick="location.href='/post'">Î∏îÎ°úÍ∑∏ Îì±Î°ù</a></div>
          <div> <a href="#" onclick="location.href='/rank'">ÏàúÏúÑ</a></div>
      </div>

      <div class="side_menu">
          <div>
              <a class="active" href="#">
              <i class="fa-solid fa-house"></i>
          </a>
          </div>
          <div> <a href="#" onclick="location.href='/post'">
              <i class="fa-solid fa-plus"></i>
              </a>
          </div>
          <div>
              <a href="#" onclick="location.href='/rank'">
              <i class="fa-solid fa-ranking-star"></i>
                  </a>
          </div>
      </div>

      <div class="cards container" >
          <div class="cardlist row" id="blogs">



              </div>
      </div>
   </body>
</html>
